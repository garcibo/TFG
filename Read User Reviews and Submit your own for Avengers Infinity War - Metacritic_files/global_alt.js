var MC_LOCAL_STORE={_ls:-1,getStorage:function(){if(MC_LOCAL_STORE._ls==-1){try{MC_LOCAL_STORE._ls=window.localStorage;}catch(a){MC_LOCAL_STORE._ls=null;}}return MC_LOCAL_STORE._ls;},test:function(){var a="mc_test";return(MC_LOCAL_STORE.save(a,a)==a);},save:function(b,c){var a=MC_LOCAL_STORE.getStorage();if(a){try{a.setItem(b,c);}catch(d){}}else{MetaC.Cookie.save(b,c,8760);}return MC_LOCAL_STORE.get(b);},get:function(b){var a=MC_LOCAL_STORE.getStorage();if(a){try{return window.localStorage.getItem(b);
}catch(c){return null;}}else{return MetaC.Cookie.get(b);}},remove:function(b){var a=MC_LOCAL_STORE.getStorage();if(a){try{window.localStorage.removeItem(b);}catch(c){}}else{MetaC.Cookie.remove(b);}},asBool:function(a){return typeof a=="string"?(a=="true"||a=="1"):a;},saveBoolTimestamp:function(b,a){var c=new Date().getTime()+"_"+a;MC_LOCAL_STORE.save(b,c);},getBoolTimestamp:function(b,c){c=c?c:31536000000;var a=null;var f=MC_LOCAL_STORE.get(b);if(f!=null){var e=f.split("_");if(e.length>1){var d=e[0];
d=parseInt(d,10);if(!isNaN(d)){if(c){if(new Date().getTime()-d<c){var g=e[1];return MC_LOCAL_STORE.asBool(g);}}}}}return a;}};window.MetaC=window.MetaC||{};Object.assign(MetaC,{adsDisplayed:false,_utagAutoPlay:-1,getTrackProductType:function(b){var a=b;if(a=="tv"){a="tvshow";}else{if(a=="music"){a="album";}}return a;},getOffsetPlus:function(a,d,b){if(typeof a==="string"){a=$(a);}var c=a.offset();if(c){if(b){c.left+=b;}if(d){c.top+=d;}}return c;},checkOmniEvents:function(){var c=MetaC.Cookie.get("omniEvents");
if(c!=null){if(window.om!=undefined){for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];if(b>0){if(a=="trackLogin"){if(om.trackLogin){om.trackLogin({id:MetaC.Cookie.get("REMOTE_USER")});}}else{if(a=="trackReviewAdd"){if(om.trackReviewAdd){om.trackReviewAdd({rating:b});}}else{if(a=="trackRatingsAdd"){if(om.trackRatingsAdd){om.trackRatingsAdd({rating:b});}}}}}}}MetaC.Cookie.remove("omniEvents");}}},setOmniEvent:function(a,b){MetaC.Cookie.save("omniEvents["+a+"]",b,1,null,".metacritic.com");},showtimeEvent:function(b,c,a){if(window.om!=undefined){if(window.om.trackShowtimeSearchClick!=undefined){if(b){om.trackShowtimeSearchClick({zipcode:b});
}else{om.trackShowtimeSearchClick({latlong:c+";"+a});}}}},fixToElem:function(f,c){var e=$(f);var a=$(c);var d=e.css("top");var b=parseInt(d,10);$(window).on("scroll",function(){var g=e.height();var m=e.offset().top;var h=a.height();var k=a.offset().top;if(h>g){var l=(m+g)-(k+h);if(l>0){var j=k+h-g;e.css("top",(j-$(document).scrollTop())+"px");}else{if(m<k){e.css("top",k-$(document).scrollTop());}}}});},innerLabelIf:function(a){if(!a||a.attr("type")=="hidden"){return;}var c=a.closest(".field");var b=$("label",c);
var d=$.trim(a.val());if(d.length==0){b.show();}else{b.hide();}},dateStrToDate:function(a){var b=false;var c=a.split(" ").join(":").split("-").join(":").split(":");if(c.length==6){b=new Date(c[0],c[1]-1,c[2],c[3],c[4],c[5]);}return b;},setUrlParam:function(h,c,a){if(!a){a=document.location.href;}var g=a.split("#");var b=g[0].replace("?","&").split("&");var d=null;if(h.match("\\[\\]$")&&c===false){d=h.substr(0,h.length-1);}var e,j=[],k=[],m=false;for(var f=1;f<b.length;f++){e=b[f].split("=");if(e[0]==h||(d&&(e[0].indexOf(d)==0||e[0].indexOf(encodeURI(d))==0))){m=true;
if(c!==false){j.push(h);k.push(c?"="+c:"");}}else{j.push(e[0]);k.push(e[1]?"="+e[1]:"");}}if(!m){if(c!==false){j.push(h);k.push(c?"="+c:"");}}var l=b[0];for(f=0;f<j.length;f++){l+=(f==0?"?":"&");l+=j[f]+k[f];}l+=g[1]?"#"+g[1]:"";return l;},getUrlParam:function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(b==null){return null;}else{return b[1]||0;}},isEDT:function(b){var a=new Date(b.getFullYear(),2,1);a=Date.UTC(a.getUTCFullYear(),2,14-(a.getUTCDay()+13)%7,5);var c=new Date(b.getFullYear(),10,1);
c=Date.UTC(c.getUTCFullYear(),10,7-(c.getUTCDay()+6)%7,4);return b.getTime()>=a&&b.getTime()<c;},handlePageViewCount:function(){var c=0;var a=MetaC.Cookie.get("metapv");if(a){a=parseInt(a,10);if(!isNaN(a)){c=a;}}c++;var b=new Date();var d=MetaC.isEDT(b)?4:5;var e=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),d);if(e<=b.getTime()){e=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),d+24);}MetaC.Cookie.save("metapv",c,new Date(e));return c;},adSession:function(){if(MetaC._session==null){MetaC.processSession();
}return MetaC._session;},adSubses:function(){if(MetaC._subses==null){MetaC.processSession();}return MetaC._subses;},processSession:function(){var a=MetaC.Cookie.get("mc_s_s");if(a){var b=a.split("_");if(b.length==2){MetaC._session=b[0];MetaC._subses=b[1];}}if(MetaC._session==null){var c=["a","b","c","d"];var e=MetaC.rndInt(0,3);MetaC._session=c[e];}if(MetaC._subses==null){MetaC._subses=MetaC.rndInt(1,4)+"";a=MetaC._session+"_"+MetaC._subses;MetaC.Cookie.save("mc_s_s",a);}var f=MetaC.getUrlParam("adSession");
if(f){MetaC._session=f;}var d=MetaC.getUrlParam("adSubses");if(d){MetaC._subses=d;}},rndInt:function(b,a){return Math.floor(Math.random()*(a-b+1))+b;},inViewport:function(d){var c=$(window);var e=d.offset().top;var b=e+d.outerHeight();var a=c.scrollTop();var f=a+c.height();return b>a&&e<f;},targetExtLinks:function(a){if(a){a.find('a:not([href*="metacritic.com"]):not([href^="#"]):not([href^="/"])').attr("target","_blank");}},handleCreateAccountClick:function(){if(window.om!=undefined&&om.trackClick){window.om.trackClick({item:"signup|sitenav"},true,function(){});
}},addCreateAccountClickEventById:function(b){const a=document.getElementById(b);if(a){a.addEventListener("click",MetaC.handleCreateAccountClick);}}});MetaC.clickEventName="click";if(navigator.userAgent.match(/iPad/i)!=null){MetaC.clickEventName="touchstart";MetaC.isIPad=true;}function ajax_busy(f,b){if($("#ajax_bizzy_icon").length==0){var d=Math.floor($(window).scrollLeft()+$(window).width()/2);var c=Math.floor($(window).scrollTop()+$(window).height()/2);if(Array.isArray(f)&&f.offset){var g=f.offset();
d=g.left+f.width()/2;c=g.top+f.height()/2;}else{if(typeof f=="object"){if(f.left){d=f.left;}if(f.top){c=f.top;}if(typeof f.pageX!="undefined"&&f.pageX!=0){d=f.pageX;}if(typeof f.pageY!="undefined"&&f.pageY!=0){c=f.pageY;}}}var a="z-index:5011000;position:absolute;";a+="left:"+d+"px;";a+="top:"+c+"px;";if(b){a+="width:20px;";}$("body").append('<img id="ajax_bizzy_icon" style="'+a+'" src="https://static.metacritic.com/images/icons/ajax_busy.gif"/>');}}function ajax_done(){$("#ajax_bizzy_icon").remove();
}MetaC.URS={_urs:null,appId:null,dev:false,config:function(b,a){MetaC.URS.appId=b;MetaC.URS.dev=a;},init:function(){if(MetaC.URS._urs==null&&MetaC.URS.appId&&window.URS){MetaC.URS._urs=URS.newInstance({appId:MetaC.URS.appId,version:"v2.2",clientToken:"434d677bcb494edb",environment:(MetaC.URS.dev)?URS.ursEnvironments.QA:URS.ursEnvironments.LIVE});MetaC.URS._urs.common.addEventListener(URS.events.AUTH_SUCCESS,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_LINK,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_INVALID_USER,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.HANDSHAKE_FAILURE,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.GENERAL_SERVER_ERROR,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.EXPIRED_ACCESS_TOKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.USERNAME_CHECK_TAKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.USERNAME_CHECK_ERROR,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.EMAIL_CHECK_TAKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.INVALID_SESSION_DETECTED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.LINK_SUCCESS,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.LINK_FAILED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.LINK_ERROR,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_SUCCESS,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_FAILED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_ERROR,MetaC.URS.responseHandler);}},responseHandler:function(c,b){var a=c.type;if(b.hasErrors()){if(MetaC.URS.dev&&window.console&&window.console.log){var d=b.getErrors();
$.each(d,function(e,f){console.log(a+" : "+f.getApplicationCode()+" : "+f.getMessage());});}}$("body").trigger("MetaC_URS_EVENT",[a,b]);},getFirstErrorCode:function(b){if(b){if(b.hasErrors()){var c=b.getErrors();if(c){var a=c[0];if(a){return a.getApplicationCode();}}}}return null;},getFirstErrorMsg:function(b){if(b){if(b.hasErrors()){var c=b.getErrors();if(c){var a=c[0];if(a){return a.getMessage();}}}}return null;},authFB:function(a){MetaC.URS.init();if(MetaC.URS._urs){if(a){var d=a;var c=function(g,f){var e=g.type;
d(e,f);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_SUCCESS,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_NO_LINK,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_INVALID_USER,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,b);};var b=c;MetaC.URS._urs.common.addEventListener(URS.events.AUTH_SUCCESS,c);
MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_LINK,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_INVALID_USER,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,c);MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK);}else{MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK);
}return true;}return false;},newFBUser:function(b,d,a){MetaC.URS.init();if(MetaC.URS._urs){var c={userName:b};if(d){c.option="e631:INTERNAL_NEWSLETTER";}if(a){c.email=a;}MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK,true,c);return true;}return false;},linkFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.link(URS.social.sites.FACEBOOK);return true;}return false;},unlinkFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.unlink(URS.social.sites.FACEBOOK);
return true;}return false;},logoutFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.logout(URS.social.sites.FACEBOOK);return true;}return false;}};MetaC.Cookie={save:function(d,f,b,g,e){g=g?g:"/";var a="";var h="";if(b){if(b.toUTCString){c=b;}else{var c=new Date();c.setTime(c.getTime()+(b*60*60*1000));}a="; expires="+c.toUTCString();}if(e){h=";domain="+e;}document.cookie=d+"="+f+a+h+"; path="+g;},get:function(a){var d=a+"=";var j=a+"[";var e=document.cookie.split(";");var k=null;
for(var f=0;f<e.length;f++){var g=e[f];while(g.charAt(0)==" "){g=g.substring(1,g.length);}if(g.indexOf(d)==0){return g.substring(d.length,g.length);}else{if(g.indexOf(j)==0){var b=g.indexOf("]=");var h=g.substring(j.length,b);if(k==null){k={};}k[h]=g.substring(b+2,g.length);}}}return k;},remove:function(a,c){var b=MetaC.Cookie.get(a);if((!!b)&&(b.constructor===Object)){for(var d in b){MetaC.Cookie.save(a+"["+d+"]","999",-1,null,c);}}else{MetaC.Cookie.save(a,"",-1,null,c);}},ilParse:function(a){a=a.replace(/\+/g,"%20");
a=decodeURIComponent(a);return JSON.parse(a);}};MetaC.FB={initialized:function(){FB.Event.subscribe("edge.create",function(a,b){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"2"});}});$("body").trigger("MetaC_fbinit");$(document).on("click",".sharing-facebook",function(b){var a=$(this);FB.ui({method:"share_open_graph",action_type:"og.likes",action_properties:JSON.stringify({object:a.data("mcSocialUrl")})},function(c){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"2"});
}});});},login:function(b){var a=b;FB.login(function(c){var d=false;if(c.authResponse){d=true;}else{}if(a){a(d);}},{scope:"email"});},isLoggedIn:function(b){var a=b;FB.getLoginStatus(function(c){var d=(c.status==="connected");if(a){b(d);}});},logout:function(b){var a=b;FB.getLoginStatus(function(c){if(c.status==="connected"){FB.logout(function(d){if(a){a();}});}else{if(a){a();}}});return true;},hasPerm:function(b,c){var a=c;FB.api("/me/permissions",function(e){var d=false;if(e.data&&e.data.length>0){var f=e.data[0];
d=(f[b]==1);}if(a){a(d);}});}};MetaC.Twitter={initialized:function(){twttr.events.bind("tweet",function(a){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"8"});}});$("body").trigger("MetaC_twttrinit");}};MetaC.Progress={show:function(a){a=MetaC.Progress.findProg(a);if(a&&a.children){a.children(".fa-spinner").addClass("fa-spin");a.css("visibility","visible");}},hide:function(a){a=MetaC.Progress.findProg(a);if(a&&a.children){a.children(".fa-spinner").removeClass("fa-spin");a.css("visibility","hidden");
}},findProg:function(a){if(a){if(!a.hasClass("progress")){a=a.find(".progress");}}return a;}};MetaC.Select={optionEventName:MetaC.clickEventName+".mcsoption",keyEventName:"keydown.mcskey",init:function(){var b=MetaC.Select;var a=$(".styled_select");a.on(MetaC.clickEventName,function(d){var e=$(this);if(e.hasClass("opened")){MetaC.Select.close(e);}else{var c=a.filter(".opened").not(this);c.each(function(f){MetaC.Select.close($(this));});MetaC.Select.open(e);}return false;});b.closeAll=function(){a.each(function(c){MetaC.Select.close($(this));
});};a.each(function(c){var d=$(this);d.find(".option").on(MetaC.Select.optionEventName,function(e){if(d.hasClass("opened")){MetaC.Select.select($(this));e.stopPropagation();return false;}});});},open:function(a){var b=a.find(".option.selected");a.data("mcqwval",b.data("mcqwval"));$(window).one(MetaC.Select.optionEventName,function(){MetaC.Select.close(a);}).on(MetaC.Select.keyEventName,function(g){var c=MetaC.Select;var e=a.find(".option.selected");var d=a.find(".option");var f=g.which||g.keyCode||g.charCode;
var h=null;if(f==27||f==9){return c.close(a);}else{if(f==13||f==32){return c.select(e);}else{if(f==35){h=d.last();}else{if(f==36){h=d.first();}else{if(f==38){h=e.prev();}else{if(f==40){h=e.next();}}}}}}if(h){if(h.length>0){d.removeClass("selected");h.addClass("selected");a.find(".options_scroll").scrollTop(h.position().top-h.height());}return false;}});a.addClass("opened");},close:function(a){$(window).off(MetaC.Select.optionEventName).off(MetaC.Select.keyEventName);a.removeClass("opened");},select:function(c){var a=c.parents(".styled_select");
var b=a.find(".option");var d=a.data("mcqwval");var e=c.data("mcqwval");if(d!=e){b.removeClass("selected");c.addClass("selected");a.trigger("change");}MetaC.Select.close(a);return false;},getSelectedValue:function(b){var a=b.find(".option.selected");return a.data("mcqwval");}};MetaC.Select2={optionEventName:MetaC.clickEventName+".mcsoption2",keyEventName:"keydown.mcskey2",mainClass:".styled_select2",init:function(){var a=MetaC.Select2;var b=$(a.mainClass);a.fixWidth=function(c){var e=c.find(".topper");
var d=c.find(".options_scroll");e.width(d.width());d.css("position","absolute");};b.each(function(d){var c=$(this);a.fixWidth(c);});a.close=function(c){$(window).off(a.optionEventName).off(a.keyEventName);c.removeClass("expanded");};a.closeAll=function(){b.each(function(c){a.close($(this));});};b.on(MetaC.clickEventName,".topper",function(c){var e=$(this);var d=e.closest(a.mainClass);d.toggleClass("expanded");if(d.hasClass("expanded")){c.stopPropagation();$(window).one(a.optionEventName,function(){a.closeAll();
}).on(a.keyEventName,function(j){var g=d.find(".option.selected");var f=d.find(".options").children(".option");var h=j.which||j.keyCode||j.charCode;var k=null;if(h==27||h==9){return a.close(d);}else{if(h==13||h==32){g.trigger(MetaC.clickEventName);return false;}else{if(h==35){k=f.last();}else{if(h==36){k=f.first();}else{if(h==38){k=g.prev();}else{if(h==40){k=g.next();}}}}}}if(k){if(k.length>0){f.removeClass("selected");k.addClass("selected");d.find(".options_scroll").scrollTop(k.position().top-k.height());
}return false;}});}});b.on(MetaC.clickEventName,".option",function(e){var d=$(this);var f=d.closest(a.mainClass);var c=f.find(".options").children(".option");c.removeClass("selected");d.addClass("selected");f.find(".disp_selected .text").text(d.find(".option_text").text());f.trigger("change");a.close(f);});}};MetaC.Nav={hoverTimer:null,init:function(){var a=MetaC.Nav;a.topHeader=$("#top_header");a.primaryNavs=$(".primary_nav_text");a.primaryNavs.on("mouseenter",function(){a.cancelTimer();var b=$(this).parents(".primary_nav_item");
a.show(b);}).on("mouseleave",function(){a.cancelTimer();a.hoverTimer=setTimeout(function(){a.hide();},500);});$(".primary_drop_down").on("mouseenter",function(){a.cancelTimer();}).on("mouseleave",function(){a.cancelTimer();a.hoverTimer=setTimeout(function(){a.hide();},200);});},cancelTimer:function(){var a=MetaC.Nav;if(a.hoverTimer){clearTimeout(a.hoverTimer);a.hoverTimer=null;}},show:function(b){var a=MetaC.Nav;if(!b){return;}var c=b.find(".primary_drop_down");if(c.length>0){setTimeout(function(){a.topHeader.addClass("dropped");
$(".primary_drop_down").removeClass("dropped");c.addClass("dropped");},200);}else{a.hide();}},isShowing:function(){var a=MetaC.Nav;return a.topHeader.hasClass("dropped");},hide:function(){var a=MetaC.Nav;$(".primary_drop_down").removeClass("dropped");a.topHeader.removeClass("dropped");}};MetaC.NavSearch={init:function(){var g=MetaC.NavSearch;var a=$("#primary_search");var k=$("#top_header");var j=$("#primary_search_box");var h=$("#primary_search_results");var f=null;var b=null;var e=null;var d=6;
var c=[150,30,310,70,170,470];$("#primary_menu_item_enter_search").on(MetaC.clickEventName,function(l){a.find("form").submit();});h.on("mousedown touchstart",".search_results_item",function(l){MetaC.setOmniEvent("pageFindingMethod","Internal:Search");var m=$(this);if(m.hasClass("all")){if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:f,trackSuggestedClick:"allResults"});}a.find("form").submit();}else{if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:f,trackSuggestedClick:"suggestedResult"});
}}});j.on("focus",function(l){k.addClass("searching");$(window).on(MetaC.clickEventName+".navSearch",function(m){if($.contains(a[0],m.target)){return true;}g.hide();return false;});if(f){g.show();}}).on("keypress",function(l){if(l.which!==0&&l.charCode!==0&&!l.ctrlKey&&!l.metaKey&&!l.altKey){var m=String.fromCharCode(l.which);f=j.val()+m;g.search(f);}}).on("keyup",function(l){if(f!=j.val()&&(b==null||b!=j.val())){f=j.val();g.search(f);}}).on("keydown",function(m){if(m.keyCode==40){g.move();}else{if(m.keyCode==38){g.move(true);
}else{if(m.keyCode==13){var l=h.find(".selected");if(l.length==1&&l.attr("href")){if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:f,trackSuggestedClick:"suggestedResult"});}window.location.href=l.attr("href");}else{if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:f,trackSuggestedClick:"allResults"});}a.find("form").submit();}return false;}else{if(m.keyCode==27){j.blur();}}}}});g.search=function(m){var l=$.trim(m);if(l!=""){if(e){e.abort();e=null;
}var n={search_term:l,image_size:98,search_each:true};g.lastPost=$.post("/autosearch",n,function(u){if(u&&u.autoComplete){var z=u.autoComplete.results;if(z&&z.length>0){if(l==$.trim(j.val())){var t="";var E=new RegExp("("+l+")","i");var p=null;var w=0;for(var v=0;v<z.length&&w<d;v++){var o=z[v];if(o&&o.url&&o.name){var B=o.refTypeId;var D="";if(o.scoreWord&&o.metaScore){D='<span class="metascore_w score_'+o.scoreWord+'" style="float: left;">'+o.metaScore+"</span>";}else{D='<span class="metascore_w tbd" style="float: left;">tbd</span>';
}var y=o.name;var A=y.replace(E,"<b>$1</b>");if(B==170){var s=y.split(" - ");if(s.length>1){y=s[0];}}var r=o.refType?o.refType:null;var C=o.itemDate?o.itemDate:null;var q='<a class="search_results_item" href="'+o.url+'">';q+=D;var x="";if(r){x+='<span class="type secondary">'+r+"</span>";}if(r&&C){x+='<span class="separ secondary">,</span>';}if(C){x+='<span class="date secondary">'+C+"</span>";}q+='<div class="title" data-mctitle="'+y+'">'+A+"<br />"+x+"</div>";q+="</a>";t+=q;p=B;w++;}}t+='<div class="search_results_item all"><span>See all results for</span><span class="all_search_term">'+l+'</span><span class="secondary">&gt;</span></div>';
g.show();h.html(t);}}else{h.html('<div class="search_no_results">No results found.</div.');}}});}};g.show=function(){h.show();k.addClass("dropped");};g.hide=function(){$(window).off(MetaC.clickEventName+".navSearch");k.removeClass("searching");h.hide();k.removeClass("dropped");};g.move=function(l){var n=h.find(".selected");if(n.length==0){var m=h.find(".search_results_item");if(m.length>0){if(l){n=$(m[m.length-1]);}else{n=$(m[0]);}}}else{n.removeClass("selected");if(l){n=n.prev();}else{n=n.next();
}}if(n.length==0){j.val(f);b=null;}else{n.addClass("selected");if(n.hasClass("all")){b=f;}else{b=n.find(".title").data("mctitle");}j.val(b);}};}};MetaC.UserReview={_deleteChoiceHtml:'<div class="delete_choice"><div class="delete_confirm"><span>Would you like to delete this review?</span><i class="fa fa-check-circle" aria-hidden="true"></i></div><div class="delete_cancel"><span>Cancel</span><i class="fa fa-times-circle" aria-hidden="true"></i></div></div>',_deleteDoneHtml:'<div class="delete_done">This review has been deleted! Thanks.</div>',init:function(){var a=MetaC.UserReview;
$(".de_wrapper .delete_start").on("click",function(){var b=$(this);b.closest(".button_wrapper").hide();a.deleteStart(b);});$(".de_wrapper").on("click",".delete_confirm",function(){a.deleteConfirm($(this));}).on("click",".delete_cancel",function(){a.deleteCancel($(this));});a.deleteStart=function(b){var c=a.getReviewObj(b);var d=a.getReviewId(c);if(d){var e=a.getWrapperObj(b);e.append(a._deleteChoiceHtml);e.find(".delete_choice").css("height",c.outerHeight());c.css("overflow","hidden");}};a.deleteConfirm=function(b,d){var g=b;
var c=a.getReviewObj(b);var e=a.getReviewId(c);if(e){var h=b.closest(".user_reviews").find('[name="csrf"]');var f=h.val();if(f==null){var h=b.closest(".user_reviews2").find('[name="csrf"]');var f=h.val();}$.post("/_ua/ajxact",{ajxact:"delrev",csrf:f,rid:e},function(j){if(j.csrf){if(h.length>0&&!d){h.val(j.csrf);setTimeout(function(){a.deleteConfirm(g,true);},1);}}else{var k=a.getWrapperObj(b);k.find(".delete_choice").remove();k.append(a._deleteDoneHtml);k.find(".delete_done").css("height",c.height()+10);
if(j.success){}else{k.find(".delete_done").text("Please try again later.");}}});}};a.deleteCancel=function(b){var c=a.getWrapperObj(b);c.find(".delete_choice").remove();c.find(".button_wrapper").show();};a.getReviewObj=function(b){var c=[];if(b){c=b.closest(".review_content");if(c.length==0){c=b.closest(".review");}}return c;};a.getWrapperObj=function(b){if(b){return b.closest(".de_wrapper");}return[];};a.getReviewId=function(b){if(b){return b.data("mcrid");}return null;};}};MetaC.Newsletter={_signupHtml:'<div id="popup_newslettter"><div class="close"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-angle-double-right" aria-hidden="true"></i></div><div class="stuff"><div class="title">Sign-up for the Weekly Metacritic Movie Newsletter Now.</div><input type=hidden name="cid" value="a6518716d26c510c026a1f2c4c2c0896"><span class="field innerLabel"><label for="email">your.name@email.com</label><input type="text" name="email" class="field_input email" autocomplete="off"></span><button type="button">Sign Me Up!</button><div class="msg"></div></div></div>',init:function(){return;
if(!MC_LOCAL_STORE.test()){return;}var a=MetaC.Newsletter;var f=$('[name="csrf_newsletter"]');if(f.length==0){return;}var d=$("#page");if(d.length==0){d=$("#main_content");}if(d.length>0){var c=MC_LOCAL_STORE.get("mc_newsletter");if(c=="2"){return;}var b=null;var e=$("#articlebody");$(window).on("scroll.newsletters",function(){if(e.length==0){$(window).off("scroll.newsletters");}else{if($(window).scrollTop()>(e.height()/2)){$(window).off("scroll.newsletters");}else{return true;}}d.append(a._signupHtml);
b=$("#popup_newslettter");if(c=="1"){b.addClass("smaller");}setTimeout(function(){b.addClass("make_vis");},100);b.find("button").on("click",function(){a.signUp();});b.find("input.email").on("keypress",function(h){var g=h.which||h.keyCode||h.charCode;if(g==13){a.signUp();return false;}return true;});b.find(".close").on("click",function(){b.toggleClass("smaller");c=MC_LOCAL_STORE.get("mc_newsletter");if(c!="2"){c="1";MC_LOCAL_STORE.save("mc_newsletter",c);}});});a.signUp=function(h){var j=f.val();var g=b.find(".email").val();
$.post("/thenewsletter",{newsletter:1,csrf:j,email:g},function(k){var m=false;if(k.csrf){if(f.length>0&&!h){f.val(k.csrf);setTimeout(function(){a.signUp(true);},1);}}else{if(k.bh&&k.bh.msg){var l=k.bh.msg;m=k.bh.success;b.find(".msg").show().text(l);}else{b.find(".msg").show().text("Please try again later.");}}if(m){setTimeout(function(){b.addClass("smaller");},3000);c="2";MC_LOCAL_STORE.save("mc_newsletter",c);}});};}}};MetaC.Settings={errorClass:"field_error",successClass:"field_success",lastUsername:"",usernameTimer:null,setFieldError:function(e,c,a,d){var b=$(".field."+e,a);
b.removeClass(MetaC.Settings.successClass);b.addClass(MetaC.Settings.errorClass);$(".field_feedback",b).html(c);if(d===undefined||d!=true){$('[name="'+e+'"]').blur().focus();}},setFieldSuccess:function(d,a,b){var c=$(".field."+d,b);c.removeClass(MetaC.Settings.errorClass);c.addClass(MetaC.Settings.successClass);$(".field_feedback",c).text(a);},clearErrors:function(a){$(".field_error",a).removeClass(MetaC.Settings.errorClass);$(".field_success",a).removeClass(MetaC.Settings.successClass);$(".field_feedback",a).text("");
$(".form_feedback",a).text("");},requireValue:function(d,c,b){var a=$("[name='"+d+"']",b).val();if($.trim(a)==""){MetaC.Settings.setFieldError(d,c,b);return null;}return a;},checkUsername:function(b,d){MetaC.Settings.clearErrors(b);var c=MetaC.Settings.requireValue("userName","Please provide a display name.");if(c==null){return false;}var a=d;MetaC.Settings._checkUsername(c,function(f,e){if(f){MetaC.Settings.setFieldSuccess("userName",e);}else{MetaC.Settings.setFieldError("userName",e);}if(a){a(f);
}});return true;},_checkUsername:function(c,b){var a=b;$.post("/signup",{check_username:1,userName:c},function(d){if(a){var f=(d.successes&&d.successes.username!=null);var e="Unable to check username.  Try again later.";if(f){e=d.successes.username;}else{if(d.errors&&d.errors.username){e=d.errors.username;}}a(f,e);}});return true;},checkChangePwd:function(d,e){MetaC.Settings.clearErrors(d);if(!e){var c=MetaC.Settings.requireValue("current_password","Please provide your current password.");if(c==null){return false;
}}var b=MetaC.Settings.requireValue("new_password","Please provide a new password.");if(b==null){return false;}var a=MetaC.Settings.requireValue("new_confirm_password","Please confirm your new password.");if(a==null){return false;}if(b!=a){MetaC.Settings.setFieldError("new_password","The passwords entered do not match.");MetaC.Settings.setFieldError("new_confirm_password","The passwords entered do not match.");return false;}return true;},checkSignupPwd:function(b){MetaC.Settings.clearErrors(b);var a=MetaC.Settings.requireValue("password","Please provide a password.",b);
if(a==null){return false;}return true;},checkSignupEmailAndUsername:function(e,f){var h=e;MetaC.Settings.clearErrors(e);var d=MetaC.Settings.requireValue("csrf","",e);var g=MetaC.Settings.requireValue("userName","Please provide a display name.",e);if(g==null){return false;}var c=MetaC.Settings.requireValue("email","Please provide a valid email address.",e);if(c==null){return false;}var b=MetaC.Settings.requireValue("emailConf","Please confirm your email address.",e);if(b==null){return false;}if(c!=b){MetaC.Settings.setFieldError("email","The email addresses entered do not match.",e);
MetaC.Settings.setFieldError("emailConf","The email addresses entered do not match.",e);return false;}$("[name='email']",e).val($.trim(c));var a=f;$.post("/signup",{check_enu:1,email:c,userName:g,csrf:d},function(j){if(j.errors&&j.errors.email){MetaC.Settings.setFieldError("email",j.errors.email,h);}if(j.errors&&j.errors.username){MetaC.Settings.setFieldError("userName",j.errors.username);}if(a){a(j.errors==null);}});return true;},checkEmail:function(b){var c=b;MetaC.Settings.clearErrors(b);var a=MetaC.Settings.requireValue("email","Please provide a valid email address.",b);
if(a==null){return false;}$("[name='email']",b).val($.trim(a));return true;},checkSignup:function(a,b){if(!MetaC.Settings.checkSignupPwd(a)){return false;}MetaC.Settings.checkSignupEmailAndUsername(a,b);return false;},monitorUsername:function(e,g,f){var b=e;var a=g;var c=f;var d=$("[name='userName']",b);d.keyup(function(){MetaC.Settings.cancelUsernameTimer();if(d.val().length==0){MetaC.Settings.clearErrors(e);a(null,true);}else{if(d.val()!=MetaC.Settings.lastUsername){MetaC.Settings.usernameTimer=setTimeout(function(){if(c){c(d.val());
}MetaC.Settings.lastUsername=d.val();var h=d.val();MetaC.Settings._checkUsername(MetaC.Settings.lastUsername,function(k,j){if(h==d.val()){if(k){MetaC.Settings.setFieldSuccess("userName",j);}else{MetaC.Settings.setFieldError("userName",j,null,true);}if(a){a(k);}}});},350);}}});},cancelUsernameTimer:function(){if(MetaC.Settings.usernameTimer!=null){clearTimeout(MetaC.Settings.usernameTimer);}MetaC.Settings.usernameTimer=null;}};MetaC.Gallery2={_html:null,_slide:0,_pending:[],_count:0,_titles:[],_vguid:null,setSlideNo:function(a){MetaC.Gallery2._slide=a;
},showSlide:function(b,c){var a=MetaC.Gallery2;if(a._html){if(b>-1&&b<=a._count){a.waiting(true);setTimeout(function(){a._showSlide(b,c);a.waiting(false);},1000);}}else{if(b!=a._slide){a._pending.push(b);a.waiting(true);}}},waiting:function(a){var b=$("#theslides");if(a){b.addClass("waiting");b.find(".fa-spinner").addClass("fa-spin");}else{b.removeClass("waiting");b.find(".fa-spinner").removeClass("fa-spin");}},setCount:function(a){MetaC.Gallery2._count=a;},setTitles:function(a){MetaC.Gallery2._titles=a;
},initDT:function(){var h=MetaC.Gallery2;var c=$("#theslides");var o=$(".slide0");var l=$(".slidex");var a=$("#leader_top_wrapper");var g=$("#leader_top");var k=$("body");var d=false;var f=c.data("url");if(f){var b={gallery_data:1};if(window.MC_ISQA&&MetaC.getUrlParam("allvideos")){b.allvideos=1;}$.post(f,b,function(p){h._html=$("<div/>").append(p);while(h._pending.length){h._showSlide(h._pending.shift());}h.waiting(false);});}h._checkArrows=function(){var p=$(".slide_next");var q=$(".slide_prev");
if(h._slide==0){l.hide();o.show();c.addClass("first");}else{o.hide();l.show();c.removeClass("first");}if(h._slide>=h._count+1){c.addClass("last");}else{c.removeClass("last");}MetaC.targetExtLinks(l);};h._showSlide=function(q,t){if(q<0){q=0;}else{if(q>h._count){q=h._count;}}var v=(h._slide!=q);h.setSlideNo(q);var u=q<=h._titles.length?h._titles[q]:"";if(h._html){var s=h._html.find("#slide_"+q);if(s.length>0){var r=s.html();l.html(r);if(MetascoreW&&MetascoreW.process){MetascoreW.process(l);}}}if(v){if(h._pending.length==0){h.refreshAds();
h.trackPhoto(l,h._vguid);}if(!t){var p=f;if(q>0){p+="/"+q;}history.pushState({popType:"gallery2",slideNum:q},u,p);}}h._checkArrows();};h.nextSlide=function(){if(h._slide==h._count){window.location.href="/pictures/recommend";}else{h.showSlide(h._slide+1);}};h.prevSlide=function(){h.showSlide(h._slide-1);};h.refreshAds=function(){if(window.metac_ads_pushdisplay){if(window.BidBarrel){if(h._slide==0){BidBarrel.setTargeting({ptype:"image_stub"});}else{BidBarrel.setTargeting({ptype:"image_gallery"});}var p=h._vguid=uuid.v1();
BidBarrel.setTargeting({vguid:p});var q=MetaC.handlePageViewCount();BidBarrel.setTargeting({pv:q});BidBarrel.auction(["mpu_plus_top","mpu_bottom","leader_bottom"]);}}};c.on(MetaC.clickEventName,".slide_image, .perm_arrows .slide_next",function(p){if($(p.target).closest(".slide_prev").length==0&&$(p.target).closest(".video_wrapper").length==0){h.nextSlide();}});c.on(MetaC.clickEventName,".slide_prev",function(){h.prevSlide();});var n=null;c.on("mouseenter",".slidex .where_to_watch",function(p){if(n){clearTimeout(n);
n=null;}$(this).addClass("expanded");}).on("mouseleave",".slidex .where_to_watch",function(p){var q=$(this);n=setTimeout(function(){q.removeClass("expanded");},250);});var j=false;var m=0;var e=setInterval(function(){if(window.om||m>6){clearInterval(e);h.trackPhoto(h._slide!=0?l:null,MC_UUID);}m++;},500);h._checkArrows();MetaC.targetExtLinks(o);},trackPhoto:function(b,e){var a=MetaC.Gallery2;var f=a._slide<=a._titles.length?a._titles[a._slide]:"Unknown";var d={pageViewGuid:e,photoId:0,photoTitle:f};
if(b&&a._slide>0){d.photoId=b.find(".slide_image").data("metaid");var c=b.find('[data-leadname="amazon"]');if(c.length>0){if(c.data("leadtype")=="Digital Subscription"){d.eventAmazonPivView=true;}else{d.eventAmazonBuyView=true;}}}if(window.om&&om.trackPhotoView){om.trackPhotoView(d);}}};$(document).ready(function(){if(MetaC.isIPad){var b=$("#page");if(b.length>0){b.addClass("iPad");}else{$("#site_layout").addClass("iPad");}}var a=".field.innerLabel input, .field.innerLabel textarea";$(document).on("focus",a,function(){$(".field.selected").removeClass("selected");
var c=$(this).closest(".field");c.addClass("selected");}).on("blur",a,function(){MetaC.innerLabelIf($(this));$(".field.selected").removeClass("selected");}).on("keydown",a,function(){MetaC.innerLabelIf($(this));}).on("keyup",a,function(){MetaC.innerLabelIf($(this));});$(a).each(function(c){MetaC.innerLabelIf($(this));});$(document).on("click","[data-leadname]",function(g){var j=$(this);var e=j.data("leadname");if(e){var c=j.data("leadtag");if(!c){c=j.attr("href");}var f=window.om_lead_media;var d=j.data("mediaid");
if(d){f={mediaId:d,mediaType:j.data("mediatype"),mediaTitle:j.data("mediatitle")};}if(!f){f={};}var h={leadMerchantName:e,leadMerchantId:j.data("leadid"),leadType:j.data("leadtype"),leadMerchantTag:c,leadPagePlacement:j.data("leadplace"),mediaType:f.mediaType,mediaId:f.mediaId,mediaTitle:f.mediaTitle};if(window.om!=undefined&&om.trackLeadClick){om.trackLeadClick(h);}}});$(document).on("click",".esite_btn table",function(g){var f=$(g.target);var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");
if(d.length>0){d[0].click();}}});$(document).on("click",".banner_container",function(g){var f=$(g.target);var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");if(d.length>0){d[0].click();}}});$(".piv_promo").on("click",function(){var d=$(this);var c=d.data("leadtag");window.open("http://www.amazon.com/gp/video/offers?tag="+c);});$(".promo_amazon").click(function(g){var f=$(g.target);var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");if(d.length>0){d[0].click();}}});$(".product_container a").on("click",function(c){var d=null;
if(window.utag_data&&utag_data.productContainerId){d=utag_data.productContainerId;}if(window.om!=undefined&&om.trackProductContainerClick){om.trackProductContainerClick(d,this,"navigate");}return false;});$(".sitewide_promo a").on("click",function(e){var d=true;var c=null;if(window.utag_data&&utag_data.sitePromotionId){c=utag_data.sitePromotionId;}if(window.om!=undefined&&om.trackSitePromotionClick){var f=$(this);if(f.attr("target")){om.trackSitePromotionClick(c,this);}else{d=false;om.trackSitePromotionClick(c,this,"navigate");
}}return d;});$("[data-mc-social-track-id]").on("click",function(f){if(window.om!=undefined){var d=$(this);var c=d.data("mcSocialTrackId");if(c){if(om.trackSocialClick){om.trackSocialClick({id:c});}}}});$("#page, #main_content").on("click",".sharing-twitter",function(g){var f=$(this);if(f.attr("href")=="#"){var c=f.data("mcSocialUrl");var d=$.param({path:c,social:true});$.ajax({type:"POST",async:false,url:"/mcshorturl",data:d,success:function(h){if(h&&h.results){var e=h.results.shortened_url;if(!e){e=h.results.url;
}if(e){var j=f.data("mcTweetPrefix");j+="&url="+e;window.open(j,"tweetwindow");f.attr("href",j);}}}});return false;}else{return true;}});MetaC.addCreateAccountClickEventById("signup");MetaC.addCreateAccountClickEventById("account_signup");if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")){$("img[src$='.svg']").each(function(c){var d=$(this);d.attr("src",d.attr("src").replace(/.svg$/,".png"));});}$("span.toggle_expand_collapse").click(function(c){$(this).html($(this).hasClass("toggle_collapse")?"Expand":"Collapse");
$(this).toggleClass("toggle_collapse");$(this).parent().toggleClass("inline_expanded");$(this).parent().toggleClass("inline_collapsed");return false;});$(".review_body span.toggle_expand_collapse").click(function(f){var c=$(this).closest(".review_body");var d=c.children("strong");if(d.length>0){d.children(".toggle_text_visibility").toggle();}});$(".expand-button button").click(function(c){$(this).html($(this).hasClass("expand_collapse")?"Expand":"Collapse");$(this).toggleClass("expand_collapse");
$(this).parents(".expand_collapse").find(".collapsed").toggle();$(this).siblings("i").toggle();$(this).siblings("svg").toggle();return false;});window.cbsoptanon.onScriptsReady(function(c){c.ot.awaitInitialConsent(function(){if($(".mc_play_trailer_btn").length){c.ot.getState(function(e,g,d,f){gatingState={targeting:e,performance:g,functional:d,social:f};MetaC.PopInPlayer.init(gatingState);});}});});$(".mc_play_trailer_btn").click(function(){$(this).prev(".load_pop_in_player").toggle();var d=$(this).data("trailer-reftype");
var c=$(this).data("trailer-refid");MetaC.PopInPlayer.wrapperObj=$(this);MetaC.PopInPlayer.playResource(d,c);});$("#mc_pop_in_video_wrapper .pop_in_close_btn").click(function(){MetaC.PopInPlayer.videoPlayer.pauseVideo();$("#mc_pop_in_video_wrapper .pop_in_title").text("");$("#mc_pop_in_video_wrapper").css("display","none");$("#mc_pop_in_video_wrapper .agegate").removeClass("warning");$("#mc_pop_in_video_wrapper .agegate").find(".msg").hide();});$(".episode_guide_overlay").click(function(){$("#episode_guide_close").prop("checked",false);
$("#episode_guide_close").eq($(this).index(".episode_guide_overlay")).prop("checked",true);});$(".ep_guide_season_selector").click(function(){var d=$(this);var c=d.data("refid");d.find(".ep_guide_toggle_icon").toggleClass("toggle-up");d.next("li").find(".ep_guide_episodes").toggle();if(!d.next("li").find(".ep_guide_episodes").hasClass("populated")){d.next("li").find(".ep_guide_episodes").addClass("populated");d.find(".ajax_swirly").toggle();$.post("/_guide/get-episodes",{ref_id:c}).done(function(e){d.next("li").find(".ep_guide_episodes").find(".ep_guide_season").after(e);
d.find(".ajax_swirly").toggle();});}});$(".mcmenu.dropdown button").click(function(d){var c=$(this).next("ul.dropdown");$(".mcmenu.dropdown .dropdown:visible").not(c).removeClass("dropdown_open");$(".mcmenu.dropdown .dropdown:visible").not(c).hide();c.toggleClass("dropdown_open");c.toggle();d.stopPropagation();});$(document).click(function(){$(".mcmenu.dropdown .dropdown:visible").removeClass("dropdown_open");$(".mcmenu.dropdown .dropdown:visible").hide();});$(".mc_nav_picks").click(function(){var d=$(this);
var c=d.attr("for");$.get(d.data("href"),function(e){d.closest(".mask-container").find(".column.subnav.ajax").after(e);});});$(".subnav.ajax .back").click(function(){$(".top-five.ajax").remove();});MetaC.Select.init();MetaC.Select2.init();MetaC.Nav.init();MetaC.NavSearch.init();MetaC.UserReview.init();MetaC.Newsletter.init();});function renderAdCallback(c){var b=1;if(c&&c.isIntromercial&&!c.isBlank){if(c.isIntromercialOpen){MetaC.Video.setHoldAutoplay(true);if(!MetaC.Video.pause()){var a=setInterval(function(){if(MetaC.Video.pause()){clearInterval(a);
}},10);setTimeout(function(){clearInterval(a);},15000);}}else{if(c.isIntromercialOpen===false){MetaC.Video.setHoldAutoplay(false);if(MetaC._utagAutoPlay!=-1&&MetaC._utagAutoPlay==true){MetaC.Video.unmute();MetaC.Video.play();}}}}}MetaC.Video={holdAutoplay:false,custParams:[],playlist:null,videoStartCBs:null,holderElemId:"videoContainer",wrapperElemId:"videoContainer_wrapper",startingWrapperClass:"video_wrapper",wrapperObj:null,videoManager:null,videoPlayer:null,autoplayStatus:null,playerContextSet:false,carousel:null,npaStatus:null,setHoldAutoplay:function(a){MetaC.Video.holdAutoplay=a;
},addToPlaylist:function(b,d,c){var a=MetaC.Video;if(!a.playlist){a.playlist=[];}a.playlist.push({url:b,title:d,mc_id:c});},setIMATargeting:function(b,c){var a=MetaC.Video;if(!a.custParams){a.custParams=[];}a.custParams.push({name:b,value:c});},getCustParams:function(){var a=MetaC.Video;var c="";if(a.custParams){for(var b=0;b<a.custParams.length;b++){c+="&"+a.custParams[b].name+"="+a.custParams[b].value;}}return c;},addVideoStartCallback:function(a){if(!MetaC.Video.videoStartCBs){MetaC.Video.videoStartCBs=[];
}MetaC.Video.videoStartCBs.push(a);},init:function(c,b){if(!window.uvpjs){return;}var a=MetaC.Video;a.npaStatus=b;a.wrapperObj=$("#"+a.wrapperElemId);a.startingWrapper=$("."+a.startingWrapperClass);a.appendNPAStatus=function(d){return d+"&npa="+a.npaStatus;};a.createVideoManager=function(d){a.wrapperObj=$("#"+a.wrapperElemId);if(a.wrapperObj.length!=0&&!a.videoManager){a.videoManager=window.uvpjs.getVideoManager();trackingModules={modules:[{name:"Overlay",enabled:"y",params:{param:{name:"ad-overlay-allowed",value:"true"}}},{enabled:false,name:"MuxQOSPluginJS",},{name:"SiteCatalyst",category:"qos",enabled:d.performance,params:[{name:"account",value:"cbsimetacriticsite"},{name:"brand",value:"Metacritic"},{name:"edition",value:"us"},{name:"siteType",value:"desktop web"},{name:"siteCode",value:"mc"},{name:"partnerID",value:"metacritic"},{name:"charSet",value:"UTF-8"},{name:"currencyCode",value:"USD"},{name:"visitorNamespace",value:"newimagitasinc"},{name:"trackingServer",value:"aa.metacritic.com"},{name:"TrackLiveStreams",value:"y"},{name:"heartbeatVisitorMarketingCloudOrgId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"},{name:"heartbeatVisitorNamespace",value:"newimagitasinc"},{name:"heartbeatTrackingServer",value:"newimagitasinc.hb.omtrdc.net"},{name:"heartbeatAdobePublisherId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"}]},{name:"NielsenTracking_SDK",category:"tracking",enabled:d.performance,params:[{name:"apid",value:"PF7B87067-BF4D-F80F-E040-070AAD316CE6"},{name:"clientid",value:"us-200330"},{name:"sfcode",value:"us"},{name:"vcid",value:"c12"},{name:"channelInfo",value:""},{name:"iag_sid",value:"1000011"},{name:"iag_tfid",value:"902"}]},{name:"ComScore_ss",category:"qos",enabled:d.targeting,params:[{name:"partnerID",value:"metacritic"},{name:"c2",value:"31824268"},{name:"publishersSecret",value:"2cb08ca4d095dd734a374dff8422c2e5"},{name:"c3",value:"3002244"},{name:"c4",value:"6012410"}]},{name:"CMSDataDefault",category:"model",enabled:"y",params:[{name:"DefaultAd",value:"http://flv.sales.cbs.com/default.flv"},{name:"PlaylistUnavailableSrc",value:"Unavailable.mp4"},{name:"PlaylistUnavailableTitle",value:"Unavailable"},{name:"MultipleAdsPos",value:"1,mid,1;1,mid,2;1,mid,3;1,mid,4;1,mid,5;1,mid,6;1,mid,7;1,mid,8;1,mid,9;1,mid,10"},{name:"AllowHDEmbed",value:"true"},{name:"DetectGeoVideoUnavailable",value:"false"}]},{name:"DynamicStreamingProfileFilter",category:"internal",enabled:"y",params:[{name:"DSI24FPS16x9-332K",value:"y"},{name:"DSI24FPS16x9-464K",value:"y"},{name:"DSI24FPS16x9-764K",value:"y"},{name:"DSI24FPS16x9-1264K",value:"y"},{name:"DSI30FPS16x9-332K",value:"y"},{name:"DSI30FPS16x9-464K",value:"y"},{name:"DSI30FPS16x9-764K",value:"y"},{name:"DSI30FPS16x9-1264K",value:"y"},{name:"DSI24FPS4x3-332K",value:"y"},{name:"DSI24FPS4x3-464K",value:"y"},{name:"DSI24FPS4x3-764K",value:"y"},{name:"DSI24FPS4x3-1264K",value:"y"},{name:"DSI30FPS4x3-332K",value:"y"},{name:"DSI30FPS4x3-464K",value:"y"},{name:"DSI30FPS4x3-764K",value:"y"},{name:"DSI30FPS4x3-1264K",value:"y"},{name:"LS30FPS16X9-1",value:"y"},{name:"LS30FPS16X9-2",value:"y"},{name:"LS30FPS16X9-3",value:"y"},{name:"LS30FPS16X9-4",value:"y"},{name:"LS30FPS16X9-5",value:"y"},{name:"LS30FPS16X9-6",value:"y"}]},{name:"VideoPlaybackSettings",category:"internal",enabled:"y",params:[{name:"DS_StableBufferTime",value:"5"},{name:"StableBufferTime",value:"4"},{name:"AutoSwitchingDisabledAtStartUp",value:"y"},{name:"BandwidthDeterminesFirstStream",value:"y"},{name:"AllowContentResume",value:"y"},{name:"EnableHDSLogging",value:"n"},{name:"LoadHDSDecryptSwf",value:"y"}]},{name:"InternationalAdTagOverride",category:"model",enabled:"y",params:{param:{name:"LocationCheckURL",value:"http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/PARTNER&ciu_szs=300x60,728x90&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cust_params=vid%3D{mediaReferenceId}%26partner%3DPARTNER&vid={mediaReferenceId}&cmsid=2289"}}}]};
trackingModules.modules=trackingModules.modules.map(function(f){if(f.name==="InternationalAdTagOverride"){f.params.param.value=a.appendNPAStatus(f.params.param.value);}return f;});var e={partner:"metacritic",usesIMA:true,enableReplay:true,uvpc:trackingModules,skin:true,playsInline:true};a.videoManager.initialize(e,a._onVideoManagerReady,a._onVideoManagerError);}};a.createVideoPlayer=function(){if(!a.videoManager){return;}var f=a.uvpjsSystemInfo;var e=true;var d=document.querySelector(".playlist.widget");
if(d!=null||MC_USER_LOGGED_IN==true){e=false;}if((e==false)||(a.holdAutoplay)){playerOptions={enableUnmutedAutoplay:false,enableMutedAutoplay:false};a.autoplayStatus=false;}else{if(f.isMobile&&utag_data.pageType=="product_overview"){playerOptions={enableUnmutedAutoplay:false,enableMutedAutoplay:true};a.autoplayStatus=true;}else{playerOptions={enableUnmutedAutoplay:false,enableMutedAutoplay:!f.isMobile&&f.supportsMutedAutoplay};a.autoplayStatus=!f.isMobile&&f.supportsMutedAutoplay;}}if(a.wrapperObj.attr("data-mctrailerimg")){playerOptions.previewImage=a.wrapperObj.attr("data-mctrailerimg");
}a.videoManager.createVideoPlayer(a.holderElemId,a._onVideoPlayerReady,playerOptions);};a.startAssociatedVideo=function(){var d=a.wrapperObj.attr("data-mcvideourl");var e=a.wrapperObj.attr("data-mcvideotitle");if(a.videoPlayer){a.playUrl(d,e);}};a.play=function(){if(a.videoPlayer){a.videoPlayer.playVideo();}else{a.createVideoPlayer();}};a.mute=function(){if(a.videoPlayer){a.videoPlayer.mute();return true;}return false;};a.unmute=function(){if(a.videoPlayer){a.videoPlayer.unMute();return true;}return false;
};a.cancelPlaylist=function(){if(a.videoPlayer){a.videoPlayer.destroyPlaylist();}};a.pause=function(){if(a.videoPlayer){try{a.videoPlayer.pauseVideo();return true;}catch(d){}}else{return false;}};a.playUrl=function(d,j){if(a.wrapperObj.attr("data-mcwarning")!=""){var k=MetaC.Cookie.get("mc_ag");if(k!="1"){a.ageGate.addClass("warning");return;}}if(!a.playerContextSet){if(window.utag_data&&a.videoPlayer.setPageContextMetadata){var h={deviceType:utag_data.deviceType,pageViewGuid:utag_data.pageViewGuid,pageType:utag_data.pageType,sitePrimaryRsid:"cbsimetacriticsite",siteSection:utag_data.siteSection,siteType:utag_data.siteType,userState:utag_data.userState,userType:utag_data.userType,test:utag_data._test,};
var m=a.wrapperObj.attr("data-mcproductid");if(m!=null){h.productID=m;}else{if(utag_data.movieId){h.productID=utag_data.movieId;}else{if(utag_data.gameId){h.productID=utag_data.gameId;}else{if(utag_data.showId){h.productID=utag_data.showId;}}}}a.videoPlayer.setPageContextMetadata(h);}a.playerContextSet=true;}var l="www.metacritic.com";var e="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/desktop/metacritic&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]";
if(window.MC_ISMOBILE){e="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/mobile_web/metacritic_mobile&ciu_szs=300x60,300x250&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]";}if(a.npaStatus!==null){e=a.appendNPAStatus(e);}e+="&cust_params=";if(MC_USER_LOGGED_IN){e+=encodeURIComponent("user=registered");}else{e+=encodeURIComponent("user=anon");}if(typeof utag_data=="object"){if(utag_data.pageType){e+=encodeURIComponent("&ptype=")+utag_data.pageType+"";
}if(utag_data.pageViewGuid){e+=encodeURIComponent("&viewGuid=")+utag_data.pageViewGuid+"";}}var n=a.getCustParams();if(n){e+=encodeURIComponent(n);}a.videoPlayer.destroyPlaylist();var g=[{vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_IMA,adCall:e,videoTitle:j,assetURL:d,mc_id:a.wrapperObj.attr("data-mctrailerid")},];if(a.playlist){for(var f=0;f<a.playlist.length;f++){if(a.playlist[f].url!=d){g.push({vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_IMA,adCall:e,videoTitle:a.playlist[f].title,assetURL:a.playlist[f].url,mc_id:a.playlist[f].mc_id});
}}}a.videoPlayer.addResourcesToPlaylist(g);};a._onVideoManagerReady=function(d){MetaC.Video.videoManager.addEventListener(uvpjs.EventType.PLAYER_INIT+".metacritic",a._onVideoPlayerInit);MetaC.Video.videoManager.addEventListener(uvpjs.EventType.CONTENT_END+".metacritic",a._onVideoContentEnd);MetaC.Video.uvpjsSystemInfo=d;MetaC.Video.createVideoPlayer();};a._onVideoManagerError=function(){if(window.MC_ISQA&&console&&console.log){console.log("MC Video Manager Error: "+args);}};a._onVideoPlayerInit=function(f){var d=f.payload.player;
if(d){d.addEventListener(uvpjs.EventType.RESOURCE_START+".metacritic",a.onResourceStart);d.addEventListener(uvpjs.EventType.RESOURCE_END+".metacritic",a.onResourceEnd);d.addEventListener(uvpjs.EventType.AD_START+".metacritic",a.onAdStart);MetaC.Video.videoPlayer=d;var e=window._cbv||(window._cbv=[]);e.push(d);}a.initVolumeControls();};a._onVideoContentEnd=function(f){if(a.carousel){a.carouselMarkNothingPlaying();var g=MetaC.Video.videoPlayer.getCurrentPlaybackState().duration;var h=MetaC.Video.videoPlayer.getCurrentPlaybackState().currentTime;
if(g==h){var d=a.wrapperObj.attr("data-mctrailerid");var e=$("li[data-meta-mcid='"+d+"']").next();if(e){e.click();}}}};a._onVideoPlayerReady=function(d){if(!MetaC.Video.videoPlayer){d.addEventListener(uvpjs.EventType.RESOURCE_START+".metacritic",a.onResourceStart);d.addEventListener(uvpjs.EventType.RESOURCE_END+".metacritic",a.onResourceEnd);d.addEventListener(uvpjs.EventType.AD_START+".metacritic",a.onAdStart);d.addEventListener(uvpjs.EventType.CONTROL_UNMUTE+".metacritic",a.playerIsUnMuted);d.addEventListener(uvpjs.EventType.CONTROL_MUTE+".metacritic",a.playerIsMuted);
MetaC.Video.videoPlayer=d;}if(!d.getPlayerMuted()||a.autoplayStatus==false){$("#unMute_btn").hide();}else{$("#unMute_btn").show();}if(uvpjs.mediaCapabilities.isDesktop()){MetaC.Video.startAssociatedVideo();}else{if((uvpjs.mediaCapabilities.isMobile()&&utag_data.pageType!="product_overview")||(uvpjs.mediaCapabilities.isMobile()&&utag_data.pageType=="product_overview"&&MC_USER_LOGGED_IN==true)){MetaC.Video.startAssociatedVideo();}}a.initVolumeControls();};a.initVolumeControls=function(){var d=$(".uvpjs__controlbar");
var e=$('<div class="uvpjs__volume"></div>');var g=$(".uvpjs__volume-slider");var f=$(".uvpjs__btn-volume");e.append(f,g);d.append(e);};a.playerIsUnMuted=function(){$("#unMute_btn").hide();};a.playerIsMuted=function(){$("#unMute_btn").show();};a.onAdStart=function(d){a.removePreview();window.MCmPulse.trackPerformanceEvent("adStart");if(a.holdAutoplay){a.mute();a.pause();}};a.onResourceEnd=function(d){a.addPreview();};a.onResourceStart=function(f){a.removePreview();if(f&&f.payload&&f.payload.rco&&f.payload.rco.type=="rp_url"){if(a.videoStartCBs){for(i=0;
i<a.videoStartCBs.length;i++){a.videoStartCBs[i](f.payload.rco);}}}if(a.carousel){a.carouselMarkNothingPlaying();var d=a.wrapperObj.attr("data-mctrailerid");var e=$("li[data-meta-mcid='"+d+"']",a.carousel);$(e).find(".fa-play").hide();$(e).find(".playing_text").show();}};a.updatePreviewImage=function(e){var d=a.wrapperObj.attr("data-mctrailerimg");e.attr("style","background-image: url("+d+")");};a.addPreview=function(){var d=a.wrapperObj.find("#controls_videoContainer .uvpjs__btn-preview");if(d){a.updatePreviewImage(d);
d[0].className="uvpjs__btn-preview uvpjs__btn-preview--replay";}};a.removePreview=function(){var d=a.wrapperObj.find("#controls_videoContainer .uvpjs__btn-preview");if(d){a.updatePreviewImage(d);d.removeClass("uvpjs__btn-preview--replay");}};$("#unMute_btn").click(function(){$("#unMute_btn").hide();MetaC.Video.videoPlayer.unMute();});a.carouselMarkNothingPlaying=function(){a.carousel.find(".fa-play").show();a.carousel.find(".playing_text").hide();};a.floatBar=a.startingWrapper.find(".videoContainer_float_bar");
if(a.floatBar.length>0){a.doneFloating=false;a.lastFloatTop=null;a.lastFloatLeft=null;$("a.toggle_expand_collapse").click(function(d){$(window).scroll();});a.floatBar.find(".videoContainer_close").one("click.floatingPlayer",function(){a.pause();a.doneFloating=true;a.wrapperObj.removeClass("floating");$(window).off("scroll.floatingPlayer");if(window.makeUndraggable){makeUndraggable(".videoContainer_float_bar","#videoContainer_wrapper");}a.wrapperObj.css("top","auto");a.wrapperObj.css("left","auto");
});$(window).on("scroll.floatingPlayer",function(h){if(!a.doneFloating){var f=$(window).scrollTop();var d=a.startingWrapper.offset().top+a.startingWrapper.height();var g=(d<=f);if(g&&a.videoPlayer){var j=a.videoPlayer.getCurrentPlaybackState();if(j&&j.playbackStarted&&!a.wrapperObj.hasClass("floating")){a.wrapperObj.addClass("floating");if(window.makeDraggable){makeDraggable(".videoContainer_float_bar","#videoContainer_wrapper");}if(a.lastFloatTop){a.wrapperObj.css("top",a.lastFloatTop);}if(a.lastFloatLeft){a.wrapperObj.css("left",a.lastFloatLeft);
}}}else{if(a.wrapperObj.hasClass("floating")){a.lastFloatTop=a.wrapperObj.css("top");a.lastFloatLeft=a.wrapperObj.css("left");if(a.lastFloatTop>0&&a.lastFloatTop=="-"){a.lastFloatTop="1px";}if(a.lastFloatLeft>0&&a.lastFloatLeft=="-"){a.lastFloatLeft="1px";}if(window.makeUndraggable){makeUndraggable(".videoContainer_float_bar","#videoContainer_wrapper");}a.wrapperObj.removeClass("floating");a.wrapperObj.css("top","auto");a.wrapperObj.css("left","auto");}}}});}a.ageGate=a.startingWrapper.find(".agegate");
a.ageGate.on(MetaC.clickEventName,".ag_button",function(){var f=17;if(a.wrapperObj.attr("data-mcrating")=="13"){f=13;}var d=Number(a.ageGate.find(".year").val())+f;var e=new Date(d,a.ageGate.find(".month").val()-1,a.ageGate.find(".day").val());if(e.getTime()>new Date().getTime()){a.ageGate.find(".msg").show();}else{MetaC.Cookie.save("mc_ag","1");a.ageGate.removeClass("warning");a.startAssociatedVideo();}});if($(".trailers_carousel")){MetaC.Video.carousel=$(".trailers_carousel");}a.createVideoManager(c);
return true;}};window.cbsoptanon.onScriptsReady(function(a){a.ot.awaitInitialConsent(function(){var b=null;a.ads.getNpaFlag(function(c){b=c;},true).then(function(){a.ot.getState(function(d,g,c,f){var e={targeting:d,performance:g,functional:c,social:f};MetaC.Video.init(e,b);}).then(function(){var d=true;if(uvpjs.mediaCapabilities.isMobile()&&utag_data.pageType=="product_overview"&&MC_USER_LOGGED_IN==false){$(window).scroll(function(){if(MetaC.Video.videoPlayer){var e=document.getElementById("videoContainer");
var f=e.getBoundingClientRect();if(f.top<0||f.bottom>(window.innerHeight||document.documentElement.clientHeight)){MetaC.Video.videoPlayer.pauseVideo();}else{if(d==true){MetaC.Video.startAssociatedVideo();d=false;}else{MetaC.Video.videoPlayer.playVideo();}}}});}if(uvpjs.mediaCapabilities.isMobile()&&(utag_data.pageType=="product_overview"||utag_data.pageType=="product_tvepisode"||utag_data.pageType=="product_tvseason")){if(document.getElementById("videoContainer_wrapper")){var c=document.getElementById("videoContainer_wrapper").getAttribute("data-mcvideotitle");
$("#section_title").text(c);}}$(".trailers_carousel .trailer_info").click(function(){var m=$(this);var j=m.attr("data-meta-videotitle");var e=m.attr("data-meta-videourl");var k=m.attr("data-meta-mcid");var l=m.attr("data-meta-warning");var h=m.attr("data-meta-rating");var g=m.attr("data-meta-providerid");var n=m.attr("data-meta-trailerimage");var f=$("#videoContainer_wrapper");f.attr("data-mctrailerid",k);f.attr("data-mctrailerurl","");f.attr("data-mctrailerimg",n);f.attr("data-mcvideourl",e);f.attr("data-mcvideotitle",j);
f.attr("data-mcwarning",l);f.attr("data-mcrating",h);f.attr("data-mcproviderid",g);if(l!=""){MetaC.Video.videoPlayer.pauseVideo();}$("#section_title").text(j);MetaC.Video.videoPlayer.overrideUserGesture(true);MetaC.Video.playUrl(e,j);});});});});});MetaC.PopInPlayer={videoManager:null,videoPlayer:null,wrapperObj:null,ageGate:null,npaStatus:null,gatingState:null,playerOptions:{enableUnmutedAutoplay:true,enableMutedAutoplay:true},init:function(c){if(!window.uvpjs){console.log("uvpjs not found, init aborting");
return;}var a=MetaC.PopInPlayer;a.gatingState=c;var b=a.getTrackingModules(c);cbsoptanon.ads.getNpaFlag(function(d){a.npaStatus=d;b.modules=b.modules.map(function(f){if(f.name==="InternationalAdTagOverride"){if(d!==null){f.params.param.value+="&npa="+d;}}return f;});var e={partner:"metacritic",usesIMA:true,enableReplay:true,uvpc:b,skin:true,playsInline:true};a.videoManager=uvpjs.getVideoManager();a.videoManager.initialize(e,a.onVideoManagerReady,a.onVideoManagerError);});},onVideoManagerReady:function(b){var a=MetaC.PopInPlayer;
MetaC.PopInPlayer.uvpjsSystemInfo=b;a.videoManager.createVideoPlayer("mcPopInVideoContainer",a.onVideoPlayerReady,a.playerOptions);},onVideoManagerError:function(a){console.log("Video manager error.",a);},onVideoPlayerReady:function(b){var a=MetaC.PopInPlayer;a.videoPlayer=b;},setPageContext:function(){var a=MetaC.PopInPlayer;if(window.utag_data&&a.videoPlayer){var b={deviceType:utag_data.deviceType,pageType:utag_data.pageType,pageViewGuid:utag_data.pageViewGuid,sitePrimaryRsid:"cbsimetacriticsite",siteSection:utag_data.siteSection,siteType:utag_data.siteType,test:utag_data._test,userState:utag_data.userState,userType:utag_data.userType,};
var c=a.wrapperObj.data("trailer-refid");if(c!=null){b.productID=c;}a.videoPlayer.setPageContextMetadata(b);}},makeAdString:function(){var a=MetaC.PopInPlayer;var b="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/desktop/metacritic&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]";if(window.MC_ISMOBILE){b="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/mobile_web/metacritic_mobile&ciu_szs=300x60,300x250&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]";
}if(a.npaStatus!==null){b+="&npa="+a.npaStatus;}b+="&cust_params=";if(MC_USER_LOGGED_IN){b+=encodeURIComponent("user=named");}else{b+=encodeURIComponent("user=anon");}if(utag_data&&utag_data.pageType&&utag_data.pageViewGuid){if(utag_data.pageType){b+=encodeURIComponent("&ptype=")+utag_data.pageType+"";}if(utag_data.pageViewGuid){b+=encodeURIComponent("&viewGuid=")+utag_data.pageViewGuid+"";}}return b;},makeRco:function(b){var a=MetaC.PopInPlayer;var c={vidContId:"mcPopInVideoContainer",type:uvpjs.mediaCapabilities.RP_IMA,adCall:a.makeAdString(),videoTitle:b.title,assetURL:b.url};
return c;},playResource:function(a,b){var c={ref_type_id:a,ref_id:b,"default":true};$.post("/_video/get-videos",c,function(g){var d=MetaC.PopInPlayer;var e=g.videos[0];$(".load_pop_in_player").css("display","none");if(!e){console.log("no trailer data received");return;}else{if(!e.hasOwnProperty("title")||!e.hasOwnProperty("url")){console.log("trailer data missing info");return;}else{if(!e.url.length>10){console.log("trailer data bad url");return;}else{d.videoRco=d.makeRco(e);d.setPageContext();MetaC.Video.initVolumeControls();
if(e.agegate){var f=MetaC.Cookie.get("mc_ag");d.videoRating=e.rating;if(f!="1"){d.setAgeGate();}else{d.videoPlayer.loadAndPlayResource(d.videoRco);d.videoPlayer.unMute();}}else{d.videoPlayer.loadAndPlayResource(d.videoRco);d.videoPlayer.unMute();}if($("#mc_pop_in_video_wrapper").is(":hidden")){$("#mc_pop_in_video_wrapper").css("display","block");}$("#mc_pop_in_video_wrapper .pop_in_title").text(e.title.substr(0,40-1)+(this.length>40?"&hellip;":""));}}}});},setAgeGate:function(){var b=MetaC.PopInPlayer;
var a=$("#mc_pop_in_video_wrapper .agegate");a.addClass("warning");a.on("click",".ag_button",function(){var e=17;if(b.videoRating=="13"){e=13;}var c=Number(a.find(".year").val())+e;var d=new Date(c,a.find(".month").val()-1,a.find(".day").val());if(d.getTime()>new Date().getTime()){a.find(".msg").show();}else{MetaC.Cookie.save("mc_ag","1");a.removeClass("warning");b.videoPlayer.loadAndPlayResource(b.videoRco);b.videoPlayer.unMute();}});},getTrackingModules:function(a){return{modules:[{name:"Overlay",enabled:"y",params:{param:{name:"ad-overlay-allowed",value:"true"}}},{enabled:false,name:"MuxQOSPluginJS",},{name:"SiteCatalyst",category:"qos",enabled:a.performance,params:[{name:"account",value:"cbsimetacriticsite"},{name:"brand",value:"Metacritic"},{name:"edition",value:"us"},{name:"siteType",value:"desktop web"},{name:"siteCode",value:"mc"},{name:"partnerID",value:"metacritic"},{name:"charSet",value:"UTF-8"},{name:"currencyCode",value:"USD"},{name:"visitorNamespace",value:"newimagitasinc"},{name:"trackingServer",value:"aa.metacritic.com"},{name:"TrackLiveStreams",value:"y"},{name:"heartbeatVisitorMarketingCloudOrgId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"},{name:"heartbeatVisitorNamespace",value:"newimagitasinc"},{name:"heartbeatTrackingServer",value:"newimagitasinc.hb.omtrdc.net"},{name:"heartbeatAdobePublisherId",value:"3C66570E5FE1A4AB0A495FFC@AdobeOrg"}]},{name:"NielsenTracking_SDK",category:"tracking",enabled:a.performance,params:[{name:"apid",value:"PF7B87067-BF4D-F80F-E040-070AAD316CE6"},{name:"clientid",value:"us-200330"},{name:"sfcode",value:"us"},{name:"vcid",value:"c12"},{name:"channelInfo",value:""},{name:"iag_sid",value:"1000011"},{name:"iag_tfid",value:"902"}]},{name:"ComScore_ss",category:"qos",enabled:a.targeting,params:[{name:"partnerID",value:"metacritic"},{name:"c2",value:"31824268"},{name:"publishersSecret",value:"2cb08ca4d095dd734a374dff8422c2e5"},{name:"c3",value:"3002244"},{name:"c4",value:"6012410"}]},{name:"CMSDataDefault",category:"model",enabled:"y",params:[{name:"DefaultAd",value:"http://flv.sales.cbs.com/default.flv"},{name:"PlaylistUnavailableSrc",value:"Unavailable.mp4"},{name:"PlaylistUnavailableTitle",value:"Unavailable"},{name:"MultipleAdsPos",value:"1,mid,1;1,mid,2;1,mid,3;1,mid,4;1,mid,5;1,mid,6;1,mid,7;1,mid,8;1,mid,9;1,mid,10"},{name:"AllowHDEmbed",value:"true"},{name:"DetectGeoVideoUnavailable",value:"false"}]},{name:"DynamicStreamingProfileFilter",category:"internal",enabled:"y",params:[{name:"DSI24FPS16x9-332K",value:"y"},{name:"DSI24FPS16x9-464K",value:"y"},{name:"DSI24FPS16x9-764K",value:"y"},{name:"DSI24FPS16x9-1264K",value:"y"},{name:"DSI30FPS16x9-332K",value:"y"},{name:"DSI30FPS16x9-464K",value:"y"},{name:"DSI30FPS16x9-764K",value:"y"},{name:"DSI30FPS16x9-1264K",value:"y"},{name:"DSI24FPS4x3-332K",value:"y"},{name:"DSI24FPS4x3-464K",value:"y"},{name:"DSI24FPS4x3-764K",value:"y"},{name:"DSI24FPS4x3-1264K",value:"y"},{name:"DSI30FPS4x3-332K",value:"y"},{name:"DSI30FPS4x3-464K",value:"y"},{name:"DSI30FPS4x3-764K",value:"y"},{name:"DSI30FPS4x3-1264K",value:"y"},{name:"LS30FPS16X9-1",value:"y"},{name:"LS30FPS16X9-2",value:"y"},{name:"LS30FPS16X9-3",value:"y"},{name:"LS30FPS16X9-4",value:"y"},{name:"LS30FPS16X9-5",value:"y"},{name:"LS30FPS16X9-6",value:"y"}]},{name:"VideoPlaybackSettings",category:"internal",enabled:"y",params:[{name:"DS_StableBufferTime",value:"5"},{name:"StableBufferTime",value:"4"},{name:"AutoSwitchingDisabledAtStartUp",value:"y"},{name:"BandwidthDeterminesFirstStream",value:"y"},{name:"AllowContentResume",value:"y"},{name:"EnableHDSLogging",value:"n"},{name:"LoadHDSDecryptSwf",value:"y"}]},{name:"InternationalAdTagOverride",category:"model",enabled:"y",params:{param:{name:"LocationCheckURL",value:"http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/22309610186/vaw-metacritic/PARTNER&ciu_szs=300x60,728x90&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&cmsid=2289"}}}]};
}};MetaC.clickEventName="click";if(navigator.userAgent.match(/iPad/i)!=null){MetaC.clickEventName="touchstart";MetaC.isIPad=true;}MetaC.ursi={rating:{},setRating:function(a,c,b){MetaC.ursi.rating[MetaC.ursi._makeKey(a,c)]={timestamp:new Date(),value:b};},newerRating:function(a,d,c){var b=MetaC.ursi.rating[MetaC.ursi._makeKey(a,d)];if(b&&b.timestamp){if(b.timestamp>c){return b.value;}}return -1;},_makeKey:function(a,b){return a+":"+b;}};MetaC.ImageSliders={slidersNext:null,slidersPrev:null,sliderTimer:null,init:function(){var a=MetaC.ImageSliders;
a.slidersNext=$(".slider_arrow.slider_next");a.slidersPrev=$(".slider_arrow.slider_previous");a.slidersNext.on(MetaC.clickEventName,function(c){var b=$(this);a.slide(b,false);c.stopPropagation();return false;});a.slidersPrev.on(MetaC.clickEventName,function(c){var b=$(this);a.slide(b,true);c.stopPropagation();return false;});$(".image_strip .product a").on("focus",function(){var b=$(this);setTimeout(function(){MetaC.ImageSliders.checkArrows(b);},10);});$(window).on("resize",function(){a.slidersNext.each(function(){MetaC.ImageSliders.checkArrows($(this));
});});a.slidersNext.each(function(){MetaC.ImageSliders.checkArrows($(this));});},slide:function(b,f){var d=MetaC.ImageSliders.getStrip(b);if(d.length>0){var e=d.scrollLeft();var c=d.width();c-=c*0.1;if(f){e-=c;}else{e+=c;}if(e<0){e=0;}if(!MetaC.isIPad){var a=b;d.animate({scrollLeft:e},400,function(){setTimeout(function(){MetaC.ImageSliders.checkArrows(a);},400);});}else{d.scrollLeft(e);}MetaC.ImageSliders.checkArrows(b);}},resetScroll:function(a){var b=MetaC.ImageSliders.getStrip(a);b.scrollLeft(0);
MetaC.ImageSliders.checkArrows(a);},checkArrows:function(a){var c=MetaC.ImageSliders.getWrapper(a);if(MetaC.ImageSliders.moreRight(a)){c.addClass("more_right");}else{c.removeClass("more_right");clearInterval(MetaC.ImageSliders.sliderTimer);}var b=MetaC.ImageSliders.getStrip(a);if(b.scrollLeft()>0){c.addClass("more_left");}else{c.removeClass("more_left");clearInterval(MetaC.ImageSliders.sliderTimer);}},moreRight:function(b){var g=MetaC.ImageSliders.getProducts(b);var h=MetaC.ImageSliders.getWrapper(b);
var c=MetaC.ImageSliders.getStrip(b);if(g.length>0){var f=g.last();var a=f.position();var e=f.width();var d=c.scrollLeft();if(a.left+e>c.width()+d+1){return true;}}return false;},getWrapper:function(a){return a.parents(".image_strip_and_arrows");},getStrip:function(a){var b=MetaC.ImageSliders.getWrapper(a);return b.find(".image_strip");},getProducts:function(a){var b=MetaC.ImageSliders.getWrapper(a);return b.find(".product");}};MetaC.SliderQWs={instances:[],addQWs:function(d,b,c,g,f){var a=MetaC.SliderQWs;
var e=a.instances.push({stripObj:d,qObj:b,progress:c,callback:g,fixedUrls:f});e--;d.data("mcqwid",e);b.data("mcqwid",e);b.each(function(h){var k=$(this);var j=k.data("mcqwtype");switch(j){case"selects":k.on("change",function(m){var l=$(this);MetaC.SliderQWs.getData(l);});break;case"tabs":k.children(".tab").on(MetaC.clickEventName,function(n){var m=$(this);var l=m.parent();l.children(".tab").removeClass("selected");m.addClass("selected");MetaC.SliderQWs.getData(l);});break;case"toggles":k.on(MetaC.clickEventName,".toggle_tab:not(.selected)",function(n){var m=$(this);
var l=m.parent();l.children(".toggle_tab").removeClass("selected");m.addClass("selected");MetaC.SliderQWs.getData(l);});break;case"checks":k.children(".checkbox").on(MetaC.clickEventName,function(q){var p=$(this);var o=p.parent();var n=o.data("mcqwmin");if(n=="1"){var m=p.hasClass("checked");var l=o.find(".checked");if(l.length==1&&m==true){o.find(".checkbox").addClass("checked");}}p.toggleClass("checked");MetaC.SliderQWs.getData(o);});break;}});},getData:function(c){var l=c.data("mcqw");if(!l){return;
}var k=c.data("mcqwid");var p=MetaC.SliderQWs.instances[k];if(p.fixedUrls){var h=c;var m=h.data("mcqwtype");var d=null;switch(m){case"selects":if(h.is("select")){d=h.val();}else{var f=h.find(".option.selected");d=f.data("mcqwval");}break;case"tabs":var f=h.children(".tab.selected");d=f.data("mcqwval");break;case"toggles":var f=h.children(".toggle_tab.selected");var g=f.data("mcqwval");d=g;var j=f.data("mcqparam");if(j){d=window.location.pathname;if(g!=null&&g!==""){d+="?";d+=f.data("mcqparam")+"[]="+g;
}}break;case"checks":var o=h.children(".checkbox.checked");d=window.location.pathname;d+="?";o.each(function(q){if(q>0){d+="&";}var r=$(this);d+=r.data("mcqparam")+"[]="+r.data("mcqwval");});break;}window.location=d;return;}var n=$('[data-mcqw="'+l+'"]');if(n.length==0){return;}var e={qwk:l};n.each(function(z){var u=$(this);var v="0";var x=u.data("mcqwset");if(x){v=x;}var w=u.data("mcqwtype");var q="qw_"+v;var y={};var t=null;var s=null;switch(w){case"selects":if(u.is("select")){t=u.val();t="val_"+t;
}else{s=u.find(".option.selected");}break;case"tabs":s=u.children(".tab.selected");break;case"toggles":s=u.children(".toggle_tab.selected");break;case"checks":var r=u.children(".checkbox");r.each(function(A){var B=$(this);y[B.data("mcqwqname")]=B.hasClass("checked");});break;}if(s){t=s.data("mcqwqname");if(t==null){t="val_"+s.data("mcqwval");}y[t]=true;}if(y){e[q]=y;}});var b=p.stripObj;var a=window.location.pathname+"?"+$.param(e);b.css("opacity",0.5);MetaC.Progress.show(p.progress);if(p.callback){p.callback(c,true);
}$.ajax({url:a,type:"GET",success:function(q){b.empty();b.append(q);MetaC.ImageSliders.resetScroll(b);MetaC.imageErrorHelper(b);},complete:function(){b.css("opacity",1);MetaC.Progress.hide(p.progress);if(p.callback){p.callback(c,false);}}});}};MetaC.Thumbs={init:function(){$(".helpful .thumb_up").on(MetaC.clickEventName,function(){var a=$(this);if(a.hasClass("selected")){return;}MetaC.Thumbs.thumbIt(a,1);});$(".helpful .thumb_down").on(MetaC.clickEventName,function(){var a=$(this);if(a.hasClass("selected")){return;
}MetaC.Thumbs.thumbIt(a,0);});},thumbIt:function(d,b,h){var g=d;var e=b;var f=d.parents(".helpful");var c=f.data("mcrefid");var k=f.data("mcreftype");var j=d.parents(".reviews").find('[name="csrf"]');var a=j.val();MetaC.Progress.show(f);$.post("/_thumb/ajxset",{thumb:b,csrf:a,ref_id:c,ref_type_id:k},function(m){MetaC.Progress.hide(f);if(m.csrf){if(j.length>0&&!h){j.val(m.csrf);setTimeout(function(){MetaC.Thumbs.thumbIt(g,e,1);},1);}else{var l=f.find(".msg");l.text("Please refresh the page and try again.");
}}else{if(m.success){f.find(".selected").removeClass("selected");d.addClass("selected");f.find(".yes_count").text(m.total_ups);f.find(".total_count").text(m.total_thumbs);f.find(".thumb_up .count").text(m.total_ups);f.find(".thumb_down .count").text(m.total_downs);}else{if(m.login){f.find(".msg").html('You must <a href="/login">log in</a> before rating.');}}}},"json");}};MetaC.TrailerList={wrapperName:"trailer_list_wrapper",moreInfoLink:null,init:function(){var a=MetaC.TrailerList;var b=$("."+a.wrapperName);
a.moreInfoLink=b.find(".more_info a");a.wasSelected=b.find(".title_list .selected");a.setTo(a.wasSelected);b.on(MetaC.clickEventName,".title_list tr",function(){var c=$(this);a.setTo(c);MetaC.Video.videoPlayer.overrideUserGesture(true);MetaC.Video.startAssociatedVideo();});},updateBg:function(c){if(c==null||c.length<1){return;}var a=MetaC.TrailerList;var e=a.getWrapper(c);if(e){e.find(".title_list .selected").removeClass("selected");}c.addClass("selected");var b=c.data("bgimg");if(b!=null&&b!=""){if(e){e.css("background-image","url("+b+")");
}}else{if(e){e.css("background-image","url(https://static.metacritic.com/images/products/movies/120w-movie.jpg)");}}var d=c.data("mctrailerurl");if(d!=null&&d!=""){if(e){e.removeClass("no_video");}}else{if(e){e.addClass("no_video");}}},setTo:function(d,l){var g=MetaC.TrailerList;var n=d;if(l){var a=g.getWrapper(d);if(a){var p=a.find(".title_list .list_item");n=p.eq(l-1);}}g.updateBg(n);if(n){var j=n.data("mctrailerid");var e=n.data("mctrailerurl");var m=n.data("mcvideourl");var k=n.data("mcwarning");
var c=n.data("mcrating");var f=n.data("mcsummaryurl");var h=n.data("mctrailerimg");var o=n.find(".item_name").text();var b=$("#videoContainer_wrapper");b.data("mctrailerurl",e);b.attr("data-mctrailerurl",e);b.data("mcvideourl",m);b.attr("data-mcvideourl",m);b.data("mcvideotitle",o);b.attr("data-mcvideotitle",o);b.data("mcwarning",k);b.attr("data-mcwarning",k);b.data("mcrating",c);b.attr("data-mcrating",c);b.data("mctrailerid",j);b.attr("data-mctrailerid",j);b.data("mctrailerimg",h);b.attr("data-mctrailerimg",h);
g.moreInfoLink.attr("href",f);}g.wasSelected=n;},getWrapper:function(b){if(b==null||b.length<1){return null;}var a=MetaC.TrailerList;if(b.hasClass(a.wrapperName)){return b;}return b.parents("."+a.wrapperName);}};MetaC.RatingWidget={lastRatingObj:null,needRefresh:null,init:function(){var a=MetaC.RatingWidget;a.hoverTimer=null;a.ratingWidget=$(".user_rating_widget");a.indicatorClassMatch=new RegExp(/(?:\s|^)ur_(\d+)/);a.ratingWidget.on("mouseenter",".ur",function(b){if(a.hoverTimer!=null){clearTimeout(a.hoverTimer);
a.hoverTimer=null;}a.clearHover();a.hideCurrentRating();var c=$(this);while(c.length>0){c.addClass("h100");c=c.prev(".ur");}});a.ratingWidget.on("mouseleave",".ur",function(b){if(a.hoverTimer!=null){clearTimeout(a.hoverTimer);}a.hoverTimer=setTimeout(function(){a.clearHover();a.restoreCurrentRating();},200);});a.ratingWidget.on(MetaC.clickEventName,".ur",function(d){a.lastRatingObj=$(this);var c=a.ratingWidget.data("disponly");if(c=="1"){a.displayRating();}else{var b=a.determineRating(a.lastRatingObj);
var e=a.determineRating(a.ratingWidget.find(".ur.p100x").last());if(b!=e){a.rate();}}});a.clearHover=function(){a.ratingWidget.find(".h100").removeClass("h100");};a.hideCurrentRating=function(){a.ratingWidget.find(".p100").removeClass("p100").addClass("p100x");};a.restoreCurrentRating=function(){a.ratingWidget.find(".p100x").removeClass("p100x").addClass("p100");};a.clearCurrentRating=function(){a.ratingWidget.find(".p100").removeClass("p100");a.ratingWidget.find(".p100x").removeClass("p100x");};
a.displayRating=function(){a.clearCurrentRating();var b=a.lastRatingObj;while(b.length>0){b.addClass("p100");b=b.prev(".ur");}};},determineRating:function(c){var a=MetaC.RatingWidget;var d=null;var b=a.indicatorClassMatch.exec(c.attr("class"));if(b!=null&&b.length>1){d=b[1];}return d;},rate:function(c){var a=MetaC.RatingWidget;var b=a.determineRating(a.lastRatingObj);if(b){MetaC.Progress.show(a.ratingWidget);var e={score:b,ref_type_id:a.ratingWidget.data("reftype"),ref_id:a.ratingWidget.data("refid"),csrf:a.ratingWidget.data("csrf")};
var d=a.ratingWidget.find(".info");d.html("");$.post("/jl/rate/set-rating",e,function(h){a.clearHover();var f=$(".popup_rating .my_score .metascore_w");if(h.scoreword){f.removeClass("positive mixed negative tbd");f.addClass(h.scoreword.toLowerCase());}f.text(b);MetaC.Progress.hide(a.ratingWidget);if(h.success){a.displayRating();if(window.om){if(window.om!=undefined&&om.trackRatingsAdd){om.trackRatingsAdd({rating:b});}}d.html("Your rating has been saved.");var g=MetaC.Popup.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_rating"),rightElements:$(".rt_wrapper .popup_hidden .post_rating"),header:$(".rt_wrapper .popup_hidden .post_rating_header .header"),closeCallback:function(){g.off();
}});g.on(MetaC.clickEventName,".popup_no_btn",function(){MetaC.Popup.hide();});g.on(MetaC.clickEventName,".popup_review_btn",function(){if(h.oldReviewId){var k=$(".write_review a").attr("href");if(k!=null&&k!=""){window.location=k;return;}}var j=MetaC.Popup.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_write"),header:$(".rt_wrapper .popup_hidden .popup_write_header .header"),singleWide:true,closeCallback:function(){j.off();}});var l=j.find(".popup_char_count");
j.on(MetaC.clickEventName,".popup_review_submit_btn",function(){MetaC.Popup.feedback();MetaC.Progress.show(j);var m={ajxSetRvw:1,csrf:a.ratingWidget.data("csrf"),review_body:j.find(".popup_write_review").val(),review_score:b,review_spoiler:j.find(".popup_spoiler").is(":checked")?"1":"0"};$.post(document.location,m,function(n){MetaC.Progress.hide(j);if(n.postError){MetaC.Popup.feedback(n.postError);}else{if(window.om&&om.trackRatingsAdd){om.trackReviewAdd({rating:b});}d.html("Your review has been submitted.");
MetaC.Popup.hide();}});});j.on("keyup",".popup_write_review",function(){var n=$(this);var o=n.val();o=o.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n");var m=o.length;l.text(m);if(m!=0&&(m<75||m>5000)){l.addClass("error");}else{l.removeClass("error");}});});}else{if(h.pendingUser){d.html('You must <a href="/send-confirm">confirm your email address</a> before rating.');}else{if(h.login){MetaC.PopupLogin.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_rating"),header:$(".rt_wrapper .popup_hidden .popup_rating_header .header"),loginCallback:function(){a.needRefresh=true;
a.rate();}});}else{if(h.csrf){if(!c){a.ratingWidget.data("csrf",h.csrf);a.rate(true);}else{d.html("Please refresh the page and try again.");}}else{if(h.suspended&&h.suspended==1){d.html("You are not allowed to submit ratings at this time.");a.clearCurrentRating();}else{if(h.errors){d.html(h.errors);}else{d.html("Please try again later.");}}}}}}},"json");}}};MetaC.Popup={inited:false,lastOptions:null,init:function(){var a=MetaC.Popup;if(a.inited){return;}a.inited=true;a.popup=$("#popup_dialog");a.header=a.popup.find("header");
a.footer=a.popup.find("footer");a.left=a.popup.find(".left");a.right=a.popup.find(".right");},display:function(b){var a=MetaC.Popup;a.init();if(b==null){b={};}a.lastOptions=b;a.header.empty().hide();a.footer.empty().hide();a.left.empty().hide();a.right.empty().hide();if(b.singleWide){a.popup.addClass("single_wide");}else{a.popup.removeClass("single_wide");}if(b.leftElements){a.left.append(b.leftElements.clone());a.left.show();}if(b.rightElements){a.right.append(b.rightElements.clone());a.right.show();
}if(b.header){a.header.append(b.header.clone());a.header.show();}$(window).on("resize.Popup",function(){a.align();});a.align();a.popup.show();return a.popup;},feedback:function(b){var a=MetaC.Popup;if(b==null){a.footer.empty().hide();}else{a.footer.html(b).show();}},align:function(){var a=MetaC.Popup;if(a.lastOptions.alignElement.position()){var b=a.lastOptions.alignElement.position();a.popup.css({position:"absolute",left:b.left,top:b.top});}else{a.popup.css({position:"absolute",left:function(){return($(window).width()-$(this).outerWidth())/2;
},top:function(){return($(window).height()-$(this).outerHeight())/2;}});}},hide:function(){var a=MetaC.Popup;$(window).off("resize.Popup");if(a.lastOptions.closeCallback){a.lastOptions.closeCallback();}a.popup.hide();}};MetaC.PopupLogin={lastOptions:null,display:function(c){if(c==null){c={};}var a=MetaC.PopupLogin;a.lastOptions=c;var b=$("#popup_login").find(".login_section");if(c.leftElements){c.rightElements=b;}else{c.leftElements=b;}a.popup=MetaC.Popup.display(c);a.popup.on(MetaC.clickEventName+".PopupLogin",".popup_signup_btn",function(){MetaC.handleCreateAccountClick();
window.location.href="/signup";});a.popup.on(MetaC.clickEventName+".PopupLogin",".popup_login_btn",function(){a.login();});a.popup.on(MetaC.clickEventName+".PopupLogin",".meta_fb_login",function(){var d=MetaC.PopupLogin;MetaC.Progress.show(d.popup);MetaC.Popup.feedback();MetaC.URS.authFB(function(e,f){if(e==URS.events.AUTH_SUCCESS){$.post("/signup",{fblogin:1},function(g){if(g&&g.success){window.utag_data.regService="facebook";MetaC.Progress.hide(d.popup);d._loginFinished();}else{window.location.href="/signupfb";
}});}if(e==URS.events.AUTH_FAILED_INVALID_USER||e==URS.events.AUTH_FAILED_NO_LINK){window.location.href="/signupfb";}else{MetaC.Progress.hide(d.popup);MetaC.Popup.feedback("Unable to login via Facebook.  Please try again later.");}});});a.popup.on("keyup.PopupLogin",function(d){if(d.keyCode==13){a.login();}});a.popup.find(".popup_email").focus();},login:function(){var a=MetaC.PopupLogin;MetaC.Progress.show(a.popup);MetaC.Popup.feedback();var c={login:true};c.email=a.popup.find("#popup_email").val();
c.password=a.popup.find("#popup_password").val();var b="/login";$.ajax({type:"POST",url:b,data:c,crossDomain:true,dataType:"json",xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest"},error:function(d,f,e){MetaC.Progress.hide(a.popup);MetaC.Popup.feedback(f);},success:function(d){MetaC.Progress.hide(a.popup);if(d.errors){MetaC.Popup.feedback(d.errors.login);}else{a._loginFinished();}}});},_loginFinished:function(){var a=MetaC.PopupLogin;if(a.lastOptions.loginCallback){a.lastOptions.loginCallback();
a.hide();}else{window.location.reload();}},hide:function(){var a=MetaC.PopupLogin;a.popup.off();MetaC.Popup.hide();}};$(window).on("popstate",function(a){if(a.originalEvent.state&&a.originalEvent.state.popType&&a.originalEvent.state.popType=="gallery2"&&a.originalEvent.state.slideNum){MetaC.Gallery2.showSlide(a.originalEvent.state.slideNum,true);}else{MetaC.Gallery2.showSlide($("#theslides").data("mcslide"),true);}});$(document).ready(function(){if(window.MC_ISQA){MetaC.imageInfoHelper=function(){$(".product img").each(function(){var a=$(this).parent();
a.append('<div class="debug_label">'+this.naturalWidth+"w "+this.naturalHeight+"h </div>");});};$(document).on("keypress",function(a){if(a.which===937&&a.altKey){MetaC.imageInfoHelper();}});}$("#user_review_submit").on(MetaC.clickEventName,function(){var d=$("#review_body");var e=false;if(!d.is(":disabled")){var h=$(".review_it_wrapper");var a=$(".user_rating_widget");var g=a.find(".info");var b=MetaC.RatingWidget.determineRating(a.find(".ur.p100").last());var c=$("#viewers_review_id").val();if(b){MetaC.Progress.show(h);
var f={ajxSetRvw:1,csrf:a.data("csrf"),review_body:d.val(),review_score:b,review_spoiler:h.find(".spoiler").hasClass("checked")?"1":"0"};if(c){f.review_id=c;}$.post(document.location,f,function(j){MetaC.Progress.hide(h);if(j.csrf){if(!e){a.data("csrf",j.csrf);e=true;$("#user_review_submit").click();}else{g.html("Please refresh the page and try again.");}}else{if(j.postError){g.html(j.postError);}else{g.html("Your review has been submitted.");}}});}else{g.html("Please select a rating.");}}});$(".hover_question").hover(function(){$(this).siblings(".hover_answer").show(400);
},function(){$(this).siblings(".hover_answer").hide();});$(".flat_checkbox").on(MetaC.clickEventName,function(){$(this).toggleClass("checked");});$("table.list .inline_see_more").on(MetaC.clickEventName,function(){$(this).closest(".summary_row").addClass("expanded").next(".details_row").addClass("expanded");});$("table.list .inline_see_less").on(MetaC.clickEventName,function(){$(this).closest(".details_row").removeClass("expanded").prev(".summary_row").removeClass("expanded");});MetaC.ImageSliders.init();
MetaC.RatingWidget.init();MetaC.Thumbs.init();});MetaC.imageErrorHelper=function(a){$(".product img",a).on("error",function(){var d=$(this);if(d.data("doneerroronce")){this.src="/images/products/movies/98w-movie.jpg";return;}var b=this.src.lastIndexOf(".");var c=this.src.substring(0,b)+"-98"+this.src.substring(b);d.data("doneerroronce",true);this.src=c;});};$(window).on("message",function(a){if(a.originalEvent.data&&typeof a.originalEvent.data==="string"){var b=a.originalEvent.data.indexOf("nativeAdBlankServed_bidtellect");
if(b===0){$("#native_top").hide();}}});if(window.Meta$==null){if(window.jQuery){window.Meta$=window.jQuery;}else{if(window.Zepto){window.Meta$=window.Zepto;}}}if(window.Meta$&&window.Meta$.trim){if(!window.MetascoreW){MetascoreW={existing:[],process:function(a){var c=a?a.find(".metascore_w[data-meta-path]"):Meta$(".metascore_w[data-meta-path]");var b={};var e=false;c.each(function(f){var h=Meta$(this);var g=h.data("metaPath");if(g){g=Meta$.trim(g);if(g!=""&&h.data("metasdone")!="1"){if(MetascoreW.existing[g]){MetascoreW._setValues(h,MetascoreW.existing[g]);
}else{var j=h.attr("id");if(!j||Meta$.trim(j)==""){j="ms"+f+Date.now();h.attr("id",j);}e=true;b[j]=g;}}}});if(e){var d=Meta$.param({paths:b});Meta$.ajax({type:"POST",url:"/metascore_w",data:d,success:function(g){if(g&&g.results){for(elemId in g.results){if(g.results.hasOwnProperty(elemId)){var f=g.results[elemId];if(f){var h=Meta$("#"+elemId);MetascoreW._setValues(h,f);MetascoreW.existing[b[elemId]]=f;}}}}}});}},_setValues:function(b,a){if(b&&b.length>0&&a){if(a.score){b.text(a.score);}if(a.describe){b.removeClass(function(c,d){return(d.match(/(^|\s)score_\S+|red|green|yellow|negative|mixed|positive|good|bad/g)||[]).join(" ");
});b.addClass("score_"+a.describe);}if(b.is("a")&&a.url){b.attr("href",a.url);}b.data("metasdone","1");}}};}Meta$(document).ready(function(){MetascoreW.process();});}makeDraggable=function(a,c){var b=$(a);var d=b;if(c){d=$(c);}b.on("mousedown.makeDraggable",function(h){var g=d.position();var j=(d.css("position")=="fixed");if(jQuery){var f=jQuery().jquery;if(f&&f.charAt(0)=="2"){j=false;}}var k={dx:h.pageX-g.left,dy:h.pageY-g.top};d.addClass("dragging");$("body").on("mousemove.makeDraggable",function(n){var m=n.pageX-k.dx;
var l=n.pageY-k.dy;if(j){l-=$(window).scrollTop();}d.css("left",m);d.css("top",l);return false;});});$("body").on("mouseup.makeDraggable",function(f){$(this).off("mousemove.makeDraggable");d.removeClass("dragging");});};makeUndraggable=function(a,c){var b=$(a);var d=b;if(c){d=$(c);}b.off("mousedown.makeDraggable");$("body").off("mousemove.makeDraggable");d.removeClass("dragging");};window.mpulseUserTiming={adstart:0};window.MCmPulse={isInitialized:false,mPulse:null,_awaitInitialization:function(b){if("function"!==typeof b){console.error("Invalid callback provided",b);
}else{if(this.isInitialized){this._updateMpulseData();b();}else{var a=this;console.info("Awaiting mpulse initilization before executing "+b.name);$(window).on("mpulse_initialized",function(){a._updateMpulseData();b();});}}},_init:function(){var a=this;$(window.document).on("onBoomerangLoaded",function(){window.BOOMR.addVar({txId:MC_UUID?MC_UUID:""});});window.mPulseEnabled=true;if(window.mPulseEnabled){$.getScript(window.location.origin+"/js/mpulse/mpulse.js",function(){try{a.mPulse=window.mPulse;
window.mPulseApp=a.mPulse.init(window.mPulseKeyConfig.apiKey,window.mPulseKeyConfig.RestApiSecretKey);if("object"===typeof a.mPulse&&"object"===typeof window.mPulseApp){a.isInitialized=true;$(window).trigger("mpulse_initialized");}else{console.error("mpulse failed to initialize");}}catch(b){console.error("Failed to initialize mPulse",b);}});}},sendBeacon:function(a,b){var c=function(){window.mPulseApp.sendTimer(a,b);};this._awaitInitialization(c);},_updateMpulseData:function(){try{window.mPulseApp.setPageGroup(utag_data.pageType);
this.mPulse.setDimension("Site View",utag_data.deviceType);if("object"===typeof window.BOOMR&&"object"===typeof window.BOOMR.session){if(window.mPulseApp.getSessionID()!==window.BOOMR.session.ID){window.mPulseApp.setSessionID(window.BOOMR.session.ID);}window.BOOMR.addVar({txId:MC_UUID?MC_UUID:""});}}catch(a){console.error("Failed to set mPulse vars for custom timers",a);}},trackPerformanceEvent:function(b){var a=this;try{isFirstOccurrence=mpulseUserTiming[b]===undefined||mpulseUserTiming[b]===0;if(isFirstOccurrence){mpulseUserTiming[b]=performance.now();
if("adStart"==b){this.sendBeacon("video_adStart_c",mpulseUserTiming[b]);}}}catch(c){console.error("mpulse error tracking "+b+": "+c);}}};MCmPulse._init();